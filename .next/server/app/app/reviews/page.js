(()=>{var e={};e.id=768,e.ids=[768],e.modules={2934:e=>{"use strict";e.exports=require("next/dist/client/components/action-async-storage.external.js")},4580:e=>{"use strict";e.exports=require("next/dist/client/components/request-async-storage.external.js")},5869:e=>{"use strict";e.exports=require("next/dist/client/components/static-generation-async-storage.external.js")},399:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},7296:(e,t,r)=>{"use strict";r.r(t),r.d(t,{GlobalError:()=>s.a,__next_app__:()=>m,originalPathname:()=>u,pages:()=>d,routeModule:()=>p,tree:()=>c}),r(1692),r(8054),r(2029),r(5866);var i=r(3191),a=r(8716),n=r(7922),s=r.n(n),l=r(5231),o={};for(let e in l)0>["default","tree","pages","GlobalError","originalPathname","__next_app__","routeModule"].indexOf(e)&&(o[e]=()=>l[e]);r.d(t,o);let c=["",{children:["app",{children:["reviews",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(r.bind(r,1692)),"/Users/yadvinder.singh/Documents/New project/src/app/app/reviews/page.tsx"]}]},{}]},{layout:[()=>Promise.resolve().then(r.bind(r,8054)),"/Users/yadvinder.singh/Documents/New project/src/app/app/layout.tsx"]}]},{layout:[()=>Promise.resolve().then(r.bind(r,2029)),"/Users/yadvinder.singh/Documents/New project/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(r.t.bind(r,5866,23)),"next/dist/client/components/not-found-error"]}],d=["/Users/yadvinder.singh/Documents/New project/src/app/app/reviews/page.tsx"],u="/app/reviews/page",m={require:r,loadChunk:()=>Promise.resolve()},p=new i.AppPageRouteModule({definition:{kind:a.x.APP_PAGE,page:"/app/reviews/page",pathname:"/app/reviews",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:c}})},9417:(e,t,r)=>{let i={fc87171cf7b7125fb5ecf987b9400356c8451855:()=>Promise.resolve().then(r.bind(r,5736)).then(e=>e.logoutAction)};async function a(e,...t){return(await i[e]()).apply(null,t)}e.exports={fc87171cf7b7125fb5ecf987b9400356c8451855:a.bind(null,"fc87171cf7b7125fb5ecf987b9400356c8451855")}},4544:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,2994,23)),Promise.resolve().then(r.t.bind(r,6114,23)),Promise.resolve().then(r.t.bind(r,9727,23)),Promise.resolve().then(r.t.bind(r,9671,23)),Promise.resolve().then(r.t.bind(r,1868,23)),Promise.resolve().then(r.t.bind(r,4759,23))},8656:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23)),Promise.resolve().then(r.bind(r,7490))},1910:(e,t,r)=>{Promise.resolve().then(r.t.bind(r,9404,23))},8153:()=>{},434:(e,t,r)=>{"use strict";r.d(t,{default:()=>a.a});var i=r(9404),a=r.n(i)},5047:(e,t,r)=>{"use strict";var i=r(7389);r.o(i,"usePathname")&&r.d(t,{usePathname:function(){return i.usePathname}}),r.o(i,"useRouter")&&r.d(t,{useRouter:function(){return i.useRouter}})},7490:(e,t,r)=>{"use strict";r.d(t,{default:()=>l});var i=r(326),a=r(434),n=r(5047);let s=[{href:"/app/reviews",label:"Reviews"},{href:"/app/templates",label:"Templates"},{href:"/app/billing",label:"Billing"},{href:"/app/settings",label:"Settings"}];function l(){let e=(0,n.usePathname)();return i.jsx("nav",{className:"flex items-center gap-2 text-sm",children:s.map(t=>{let r=e===t.href||e.startsWith(`${t.href}/`);return i.jsx(a.default,{href:t.href,className:`rounded-full px-3 py-1.5 transition ${r?"bg-[#E6ECF5] text-ink":"text-slate hover:bg-[#F1F4F9] hover:text-ink"}`,children:t.label},t.href)})})}},5736:(e,t,r)=>{"use strict";r.r(t),r.d(t,{logoutAction:()=>s});var i=r(4330);r(166);var a=r(8585),n=r(5655);async function s(){let e=(0,n.f)();await e.auth.signOut(),(0,a.redirect)("/login?message=You%20have%20been%20logged%20out.")}(0,r(618).h)([s]),(0,i.j)("fc87171cf7b7125fb5ecf987b9400356c8451855",s)},8054:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var i=r(9510),a=r(7371),n=r(5456);let s=(0,r(8570).createProxy)(String.raw`/Users/yadvinder.singh/Documents/New project/src/components/AppNav.tsx#default`);var l=r(5736);async function o({children:e}){return await (0,n.V)(),(0,i.jsxs)("div",{className:"min-h-screen bg-[var(--bg)]",children:[i.jsx("header",{className:"border-b border-[var(--border)] bg-white/95 backdrop-blur",children:(0,i.jsxs)("div",{className:"mx-auto flex max-w-6xl items-center justify-between px-6 py-5",children:[(0,i.jsxs)("div",{className:"flex items-center gap-8",children:[i.jsx(a.default,{href:"/app/reviews",className:"font-semibold tracking-wide",children:"StatusCert AI"}),i.jsx(s,{})]}),(0,i.jsxs)("div",{className:"flex items-center gap-3",children:[i.jsx("div",{className:"text-xs uppercase tracking-[0.2em] text-slate",children:"Ontario Condo Review Platform"}),i.jsx("form",{action:l.logoutAction,children:i.jsx("button",{className:"btn btn-secondary px-4 py-1.5 text-xs",children:"Log out"})})]})]})}),i.jsx("main",{className:"mx-auto max-w-6xl px-6 py-10",children:e})]})}},1692:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c});var i=r(9510),a=r(7371),n=r(5456),s=r(5655),l=r(5126),o=r(7690);async function c(){let{firmId:e,user:t}=await (0,n.G)(),r=(0,s.f)(),c=await (0,o.a)(e,t.email),{data:d}=await r.from("status_cert_reviews").select("id, title, status, created_at").eq("firm_id",e).order("created_at",{ascending:!1});return(0,i.jsxs)("div",{className:"space-y-6",children:[(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("p",{className:"section-title",children:"Status Certificate"}),i.jsx("h1",{className:"font-serif text-3xl font-semibold",children:"Reviews"})]}),i.jsx(a.default,{href:"/app/reviews/new",className:"btn btn-primary",children:"New review"})]}),c.allowed?"TRIAL"===c.entitlementType?(0,i.jsxs)("div",{className:"rounded-xl border border-[#E9DEBF] bg-[#FFFDF6] p-4 text-sm text-slate",children:["Current entitlement: ",c.entitlementLabel,".",i.jsx(a.default,{href:"/app/billing?source=trial-warning",className:"ml-1 underline text-ink",children:"View plans"})]}):"CREDITS"===c.entitlementType?(0,i.jsxs)("div",{className:"rounded-xl border border-[#E9DEBF] bg-[#FFFDF6] p-4 text-sm text-slate",children:["Current entitlement: ",c.entitlementLabel,".",i.jsx(a.default,{href:"/app/billing?source=credits-warning",className:"ml-1 underline text-ink",children:"Buy more credits"})]}):"MONTHLY"===c.entitlementType||"YEARLY"===c.entitlementType?(0,i.jsxs)("div",{className:"rounded-xl border border-[#D8E4F3] bg-[#F4F8FD] p-4 text-sm text-slate",children:["Current entitlement: ",c.entitlementLabel,"."]}):"FOUNDER"===c.entitlementType?(0,i.jsxs)("div",{className:"rounded-xl border border-[#D8E4F3] bg-[#F4F8FD] p-4 text-sm text-slate",children:["Current entitlement: ",c.entitlementLabel,"."]}):null:(0,i.jsxs)("div",{className:"rounded-xl border border-[#E6D1B8] bg-[#FFF8EE] p-4 text-sm text-slate",children:["No active entitlement remaining. Choose a plan or buy a one-file credit to continue generating drafts and exporting DOCX.",i.jsx(a.default,{href:"/app/billing?source=gate",className:"ml-1 underline text-ink",children:"Go to Billing"})]}),c.allowed&&c.nearLimitMessage?(0,i.jsxs)("div",{className:"rounded-xl border border-[#E9DEBF] bg-[#FFFDF6] p-4 text-sm text-slate",children:[c.nearLimitMessage,i.jsx(a.default,{href:"/app/billing?source=limit-warning",className:"ml-1 underline text-ink",children:"Manage billing"})]}):null,i.jsx("div",{className:"card p-6",children:i.jsx("div",{className:"grid gap-4",children:d?.length?d.map(e=>i.jsx(a.default,{href:`/app/reviews/${e.id}`,className:"rounded-xl border border-[#E6E2D9] p-4 hover:border-ink transition",children:(0,i.jsxs)("div",{className:"flex items-center justify-between",children:[(0,i.jsxs)("div",{children:[i.jsx("h3",{className:"font-semibold",children:e.title}),i.jsx("p",{className:"text-xs text-slate",children:new Date(e.created_at).toLocaleDateString()})]}),i.jsx("span",{className:"badge bg-[#EEE6D7] text-slate",children:(0,l.Iq)(e.status)})]})},e.id)):i.jsx("p",{className:"text-sm text-slate",children:"No reviews yet. Create your first status certificate review."})})})]})}},2029:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>c,metadata:()=>o});var i=r(9510),a=r(2851),n=r.n(a),s=r(7337),l=r.n(s);r(5023);let o={title:"StatusCert AI",description:"Lawyer-grade status certificate reviews for Ontario real estate firms."};function c({children:e}){return i.jsx("html",{lang:"en",className:`${n().variable} ${l().variable}`,children:i.jsx("body",{className:"font-sans",children:e})})}},5456:(e,t,r)=>{"use strict";r.d(t,{G:()=>l,V:()=>s});var i=r(8585),a=r(5655),n=r(9658);async function s(){let e=(0,a.f)(),{data:t}=await e.auth.getUser();return t.user||(0,i.redirect)("/login"),t.user}async function l(){let e=(0,a.f)(),t=(0,n.h)(),{data:{user:r}}=await e.auth.getUser();r||(0,i.redirect)("/login");let{data:s,error:l}=await t.from("firm_members").select("firm_id, role").eq("user_id",r.id).maybeSingle();return l&&(0,i.redirect)(`/login?error=${encodeURIComponent(`Membership lookup failed: ${l.message}`)}`),s?.firm_id||(0,i.redirect)("/login?error=No%20firm%20membership%20found%20for%20this%20account."),{firmId:s.firm_id,role:s.role,user:r}}},7690:(e,t,r)=>{"use strict";r.d(t,{a:()=>n});var i=r(5655),a=r(1835);async function n(e,t){let r=(0,i.f)(),{data:n}=await r.from("firm_billing").select("trial_remaining, credits_balance, status, plan_type, founder_override").eq("firm_id",e).single(),s=(process.env.FOUNDER_EMAILS||"").split(",").map(e=>e.trim().toLowerCase()).filter(Boolean),l=!!n?.founder_override||!!t&&s.includes(t.toLowerCase()),o=n?.status==="active"&&(n?.plan_type==="monthly"||n?.plan_type==="yearly"),c=(0,a.pi)({founderOverride:l,activeSubscription:o,trialRemaining:n?.trial_remaining??Number(process.env.FREE_TRIAL_REVIEWS||1),creditsBalance:n?.credits_balance??0}),d="NONE",u="No active entitlement",m=null;return c.founderOverride?(d="FOUNDER",u="Founder access (unlimited)"):c.activeSubscription&&n?.plan_type==="yearly"?(d="YEARLY",u="Yearly plan (unlimited)"):c.activeSubscription&&n?.plan_type==="monthly"?(d="MONTHLY",u="Monthly plan (unlimited)"):c.creditsBalance>0?(d="CREDITS",u=`One-file credits (${c.creditsBalance} remaining)`,c.creditsBalance<=1&&(m="You are on your last one-file credit.")):c.trialRemaining>0?(d="TRIAL",u=`Free trial (${c.trialRemaining} review remaining)`,c.trialRemaining<=1&&(m="Your free trial is about to end.")):m="No trial or credits remaining.",{...c,rawPlanType:n?.plan_type||null,rawStatus:n?.status||null,entitlementType:d,entitlementLabel:u,nearLimitMessage:m}}},1835:(e,t,r)=>{"use strict";function i(e){return e.founderOverride||e.activeSubscription||e.trialRemaining>0||e.creditsBalance>0}function a(e){return e.founderOverride?{...e,allowed:!0,reason:"FOUNDER_OVERRIDE"}:e.activeSubscription?{...e,allowed:!0,reason:"ACTIVE_SUBSCRIPTION"}:e.trialRemaining>0?{...e,allowed:!0,reason:"TRIAL_AVAILABLE"}:e.creditsBalance>0?{...e,allowed:!0,reason:"CREDITS_AVAILABLE"}:{...e,allowed:!1,reason:"NO_ENTITLEMENTS"}}function n(e){return e.founderOverride||e.activeSubscription?{...e}:e.trialRemaining>0?{...e,trialRemaining:e.trialRemaining-1}:e.creditsBalance>0?{...e,creditsBalance:e.creditsBalance-1}:{...e}}r.d(t,{Uc:()=>i,pi:()=>a,t1:()=>n})},5126:(e,t,r)=>{"use strict";r.d(t,{Iq:()=>a,Q1:()=>i});let i=["QUEUED","RUNNING"];function a(e){return"PROCESSING"===e?"PROCESSING":"READY"===e||"REVIEW_GENERATED"===e||"FINALIZED"===e?"READY":"EXPORTED"===e?"EXPORTED":"FAILED"===e?"FAILED":"DRAFT"}},9658:(e,t,r)=>{"use strict";r.d(t,{h:()=>a});var i=r(7857);function a(){return(0,i.eI)("https://txyjzawvhknrtzwkennn.supabase.co",process.env.SUPABASE_SERVICE_ROLE_KEY,{auth:{persistSession:!1}})}},5655:(e,t,r)=>{"use strict";r.d(t,{f:()=>n});var i=r(1615),a=r(7721);function n(){let e=(0,i.cookies)(),t=(0,i.headers)();return(0,a.createServerClient)("https://txyjzawvhknrtzwkennn.supabase.co","eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InR4eWp6YXd2aGtucnR6d2tlbm5uIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjQ4NjU2NzQsImV4cCI6MjA4MDQ0MTY3NH0.MTUhireV81KmuGDl7mMXmNXYaM4llV9k4j0-_s9MPms",{cookies:{get:t=>e.get(t)?.value,set(t,r,i){e.set({name:t,value:r,...i})},remove(t,r){e.set({name:t,value:"",...r,maxAge:0})}},headers:{get:e=>t.get(e)??void 0}})}},5023:()=>{}};var t=require("../../../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),i=t.X(0,[276,786,702,940,783,433],()=>r(7296));module.exports=i})();